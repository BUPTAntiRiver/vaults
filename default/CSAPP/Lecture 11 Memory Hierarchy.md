# 一、存储技术与发展趋势

- 存储设备从快到慢、从小到大的层次结构：寄存器 → L1/L2/L3 Cache → 主存（DRAM）→ 本地磁盘 → 远程磁盘
- 较快的存储器更昂贵、容量更小
- 程序通常具有**局部性**（locality），使缓存成为提高性能的关键

# 二、RAM 内存

- 类型：
  - **SRAM**（静态 RAM）：快、不需刷新，常用于缓存（Cache），成本高
  - **DRAM**（动态 RAM）：慢、需刷新，常用于主存，成本低
- 易失性：断电数据丢失

# 三、非易失性存储

- 类型：ROM、PROM、EPROM、EEPROM、Flash
- Flash 特性：支持分块擦除，寿命有限（约 100,000 次擦写）
- 应用：BIOS、SSD、U 盘等设备中的固件存储

# 四、磁盘结构

- 结构：
  - 多个盘片（platters） → 表面（surface） → 轨道（track） → 扇区（sector）
  - 多盘面对齐轨道 → 柱面（cylinder）
- 容量计算：

```
  容量 = 每扇区字节数 × 平均每轨扇区数 × 每面轨数 × 每盘片面数 × 盘片数
```

# 五、磁盘访问时间

- T_access = T_seek + T_rotation + T_transfer
  - 平均寻道时间：3–9ms
  - 平均旋转延迟：约 4ms（7200 RPM）
  - 平均传输时间：约 0.02ms
- 与内存访问时间对比：
  - DRAM ≈ 60ns
  - SRAM ≈ 4ns
  - 磁盘慢 DRAM 约 2500 倍，慢 SRAM 约 40000 倍

# 六、SSD（固态硬盘）

- 无机械部件：更快、更省电、更耐用
- 写入限制：块擦除 → 写放大 → 写速度较慢
- 使用寿命有限，但有磨损均衡机制（wear leveling）
- 成本比磁盘高（2015 年约贵 30 倍）

# 七、局部性（Locality）

- **Temporal locality**：近期使用过的数据很可能再次被访问
- **Spatial locality**：地址相邻的数据倾向被一起访问
- 示例：
  ```c
  sum = 0;
  for (i = 0; i < n; i++)
      sum += a[i];
  ```

# 八、缓存（Cache）概念

- Cache 是小而快的存储器，缓存更大更慢的设备中的部分数据
- 每层 Cache 是下一层的缓存
- 命中与未命中：
  - **命中**：数据已在缓存中
  - **未命中**：需从更下层加载数据

# 九、缓存未命中类型

- **Cold Miss（冷启动未命中）**：数据首次加载，Cache 还是空的。
- **Conflict Miss（冲突未命中）**：下一级缓存太大，不同数据映射到同一缓存位置，这取决于映射的算法
- **Capacity Miss（容量未命中）**：缓存不足以容纳所有活跃数据块

# 十、缓存的实际应用

- 硬件层面：TLB、L1/L2/L3 Cache
- 软件层面：Web 浏览器缓存、数据库缓存等
